window._ty_rum||function(a){function b(a){switch(typeof a){case"object":if(!a)return"null";if(a instanceof Array){for(var c="[",d=0;d<a.length;d++)c+=(d>0?",":"")+b(a[d]);return c+"]"}var c="{",d=0;for(var e in a)if("function"!=typeof a[e]){var f=b(a[e]);c+=(d>0?",":"")+b(e)+":"+f,d++}return c+"}";case"string":return'"'+a.replace(/([\"\\])/g,"\\$1")+'"';case"number":return a.toString();case"boolean":return a?"true":"false";case"function":return"[function]";case"undefined":default:return"undefined"}}function c(b){return a.encodeURIComponent?encodeURIComponent(b):b}function d(){return Date.now?Date.now():(new Date).valueOf()}function e(){return function(){}}function f(){y.initend()}function g(){"complete"===q.readyState&&y.initend()}function h(a){function b(){y.send()}return r.load_time?!0:(y.initend(),r.load_time=d(),void(9===a?b():setTimeout(b,0)))}function i(){z||h(9),z=1}function j(){y.touch||(y.touch=d())}function k(a){var b=arguments,c="unknown",e=[d()];if(0!=b.length){if("string"==typeof a){var f=b.length<4?b.length:4;e[1]=b[0],f>2&&(e[2]=b[2],e[3]=0,e[4]=b[1]),f>3&&b[3]&&(e[3]=b[3])}else if(a instanceof Event&&(e[1]=a.message||(a.error&&a.error.constructor.name)+(a.error&&a.error.message)||"",e[2]=a.lineno?a.lineno:0,e[3]=a.colno?a.colno:0,e[4]=a.filename||a.error&&a.error.fileName||a.target&&a.target.baseURI||"",e[4]==q.URL&&(e[4]="#"),e[1]===c&&e[4]===c))return;y.errors.push(e)}}function l(a,b,c){for(var d="o."+b+"(",e=0;e<c.length;e++)d+=(e>0?",":"")+"a["+e+"]";return d+=");",new Function(d)()}function m(a){return function(){var b=arguments;if(!this._ty_wrap){var c=w.args.apply(this,b);this._ty_rum={method:c[0],url:c[1],start:d()}}try{return a.apply(this,b)}catch(e){return this.open=a,l(this,"open",b)}}}function n(b){return"string"==typeof b?b.length:a.ArrayBuffer&&b instanceof ArrayBuffer?b.byteLength:a.Blob&&b instanceof Blob?b.size:b&&b.length?b.length:0}function o(b){return function(){function c(a){var b,c,e=j._ty_rum;if(e){if(4!==e.readyState&&(e.end=d()),e.s=j.status,""==j.responseType||"text"==j.responseType)e.res=n(j.responseText);else if(j.response)e.res=n(j.response);else try{e.res=n(j.responseText)}catch(g){e.res=0}if(e.readyState=j.readyState,e.cb_time=k,b=[e.method+" "+e.url,e.s>0?e.end-e.start:0,k,e.s,e.s>0?0:a,e.res,e.req],e.r&&(c=f(j),c&&(c=c.xData)&&(b.push(c.id),b.push(c.action),b.push(c.time&&c.time.duration),b.push(c.time&&c.time.qu))),r.aa.push(b),r.server.custom_urls&&r.server.custom_urls.length&&!y.ct){if(!r.pattern){r.pattern=[];for(var h=0;h<r.server.custom_urls.length;h++)r.pattern.push(new RegExp(r.server.custom_urls[h]))}for(var h=0;h<r.pattern.length;h++)if(e.url.match(r.pattern[h])){y.ct=e.end+k;break}}y.sa(),j._ty_rum=null}}function e(){4==j.readyState&&c(0)}function f(b){var c;if(b.getResponseHeader){var d=w.parseJSON(b.getResponseHeader("X-Tingyun-Tx-Data"));d&&d.r&&b._ty_rum&&d.r+""==b._ty_rum.r+""&&(c={name:b._ty_rum.url,xData:d},x&&a._ty_rum.c_ra.push(c))}return c}function g(a){return function(){var b;4==j.readyState&&j._ty_rum&&(j._ty_rum.end=b=d(),j._ty_rum.readyState=4);var c=a.apply(this,arguments);return 4==j.readyState&&(k=d()-b),e(),c}}function h(a){return function(){var b=j._ty_rum;return b?"progress"==a?!0:("abort"==a?c(905):"loadstart"==a?b.start=d():"error"==a?c(990):"timeout"==a&&c(903),!0):!0}}function i(a,b){b instanceof Array||(b=[b]);for(var c=0;c<b.length;c++){var d=b[c];w.sh(a,d,h(d),!1)}}if(!this._ty_wrap){this._ty_rum.start=d(),this._ty_rum.req=arguments[0]?n(arguments[0]):0;var j=this,k=0,m=w.wrap(!1,this,"onreadystatechange",g);m||w.sh(this,"readystatechange",e,!1),i(this,["error","progress","abort","load","loadstart","loadend","timeout"]),m||setTimeout(function(){w.wrap(!1,j,"onreadystatechange",g)},0)}var o=function(){function a(a){var b={},c=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?/.exec(a);return c&&(b.protocol=c[1]?c[1]+":":"http:",b.hostname=c[3],b.port=c[4]||""),b}return function(b){var c=location;if(b=w.trim(b)){if(b=b.toLowerCase(),b.startsWith("//")&&(b=c.protocol+b),!b.startsWith("http"))return!0;var d=a(b),e=d.protocol===c.protocol&&d.hostname===c.hostname;return e&&(e=d.port===c.port?!0:!c.port&&("http:"===c.protocol&&"80"===d.port||"https:"===c.protocol&&"443"===d.port)),e}return!1}}(),p=arguments;try{try{var q=r.server;q&&q.id&&this._ty_rum&&o(this._ty_rum.url)&&(this._ty_rum.r=(new Date).getTime()%1e8,this.setRequestHeader&&this.setRequestHeader("X-Tingyun-Id",q.id+";r="+this._ty_rum.r))}catch(s){}return b.apply(this,p)}catch(s){return this.send=b,l(this,"send",p)}}}var p=a.XMLHttpRequest,q=document,r=a._ty_rum={st:d(),ra:[],c_ra:[],aa:[],snd_du:function(){return this.server.adu?1e3*this.server.adu:1e4},cc:function(){return this.server.ac?this.server.ac:10}},s=r;if(s.server={id:"b7zdQ4sD_p0",beacon:"beacon.tingyun.com",beacon_err:"beacon-err.tingyun.com",key:"KCC_qqDbsNc",trace_threshold:7e3,custom_urls:[],sr:1},r.server&&!(r.server.sr&&Math.random()>=r.server.sr)){var t=String.prototype.trim;String.prototype.startsWith||(String.prototype.startsWith=function(a,b){return b=b||0,this.indexOf(a,b)===b});var u=/^http/i,v=function(){function a(){return(0|65536*(1+Math.random())).toString(16).substring(1)}return a()+"-"+a()+a()}(),w={wrap:function(a,b,c,d,e){try{var f=b[c]}catch(g){if(!a)return!1}if(!f&&!a)return!1;if(f&&f._ty_wrap)return!1;try{b[c]=d(f,e)}catch(g){return!1}return b[c]._ty_wrap=[f],!0},mkurl:function(a,b){var e=arguments,f=/^https/i.test(q.URL)?"https":"http";if(f=f+"://"+a+"/"+b+"?av=1.0.0&v=1.3.1&key="+c(r.server.key)+"&ref="+c(q.URL)+"&rand="+d()+"&pvid="+v,"pf"!==b&&r&&r.agent&&r.agent.n&&(f+="&n="+c(r.agent.n)),e.length>2){var g=e[2];for(var h in g)f+="&"+h+"="+g[h]}return f},GET:function(a,b){function c(){b&&b.apply(this,arguments),d.parentNode&&d.parentNode.removeChild(d)}if(navigator&&navigator.sendBeacon&&u.test(a))return navigator.sendBeacon(a,null);var d=q.createElement("img");return d.setAttribute("src",a),d.setAttribute("style","display:none"),this.sh(d,"readystatechange",function(){("loaded"==d.readyState||4==d.readyState)&&c("loaded")},!1),this.sh(d,"load",function(){return c("load"),!0},!1),this.sh(d,"error",function(){return c("error"),!0},!1),q.body.appendChild(d)},fpt:function(a,b,c){function d(a,b,c){var d=q.createElement(a);try{for(var e in b)d[e]=b[e]}catch(f){var g="<"+a;for(var e in b)g+=" "+e+'="'+b[e]+'"';g+=">",c||(g+="</"+a+">"),d=q.createElement(g)}return d}var e=d("div",{style:"display:none"},!1),f=d("iframe",{name:"_ty_rum_frm",width:0,height:0,style:"display:none"},!1),g=d("form",{style:"display:none",action:a,enctype:"application/x-www-form-urlencoded",method:"post",target:"_ty_rum_frm"},!1),h=d("input",{name:"data",type:"hidden"},!0);return h.value=b,g.appendChild(h),e.appendChild(f),e.appendChild(g),q.body.appendChild(e),g.submit(),f.onreadystatechange=function(){("complete"===f.readyState||4===f.readyState)&&(c(null,f.innerHTML),q.body.removeChild(e))},!0},POST:function(b,c,d,e){if(this.ie)return this.fpt(b,c,e);if(navigator&&navigator.sendBeacon&&u.test(b))return navigator.sendBeacon(b,c);var f;if(a.XDomainRequest)return f=new XDomainRequest,f.open("POST",b),f.onload=function(){e(null,f.responseText)},this.sh(f,"load",function(){e(null,f.responseText)},!1),this.sh(f,"error",function(){e("POST("+b+")error")},!1),this.wrap(!0,f,"onerror",function(){return function(){return e&&e("post error",f.responseText),!0}}),f.send(c),!0;if(!p)return!1;f=new p,f.overrideMimeType&&f.overrideMimeType("text/html");try{f._ty_wrap=1}catch(g){}var h=0;f.onreadystatechange=function(){4==f.readyState&&200==f.status&&(0==h&&e(null,f.responseText),h++)},f.onerror&&this.wrap(!0,f,"onerror",function(a){return function(){return e("post error",f.responseText),"function"==typeof a?a.apply(this,arguments):!0}});try{f.open("POST",b,!0)}catch(g){return this.fpt(b,c,e)}for(var i in d)f.setRequestHeader(i,d[i]);return f.send(c),!0},sh:function(a,b,c,d){return a.addEventListener?a.addEventListener(b,c,d):a.attachEvent?a.attachEvent("on"+b,c):!1},args:function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);return a},stringify:b,parseJSON:function(b){if(b&&"string"==typeof b){var c=a.JSON?a.JSON.parse:function(a){return new Function("return "+a)()};return c(b)}return null},trim:t?function(a){return null==a?"":t.call(a)}:function(a){return null==a?"":a.toString().replace(/^\s+/,"").replace(/\s+$/,"")}},x=a.performance?a.performance:a.Performance;x&&(w.sh(x,"resourcetimingbufferfull",function(){var a=x.getEntriesByType("resource");a&&(r.ra=r.ra.concat(a),x.clearResourceTimings())},!1),w.sh(x,"webkitresourcetimingbufferfull",function(){var a=x.getEntriesByType("resource");a&&(r.ra=r.ra.concat(a),x.webkitClearResourceTimings())},!1));for(var y=r.metric={ready:function(){return r.load_time},initend:function(){function a(){y.sa()}r.end_time||(r.end_time=d(),this._h=setInterval(a,2e3))},send:function(){function d(){function b(a){return e[a]>0?e[a]-h:0}var d={};if(x&&x.timing){var e=x.timing;h=e.navigationStart;var f=b("domainLookupStart"),g=b("domainLookupEnd"),i=b("redirectStart"),j=b("redirectEnd"),k=b("connectStart"),l=b("connectEnd");d={f:b("fetchStart"),qs:b("requestStart"),rs:b("responseStart"),re:b("responseEnd"),os:b("domContentLoadedEventStart"),oe:b("domContentLoadedEventEnd"),oi:b("domInteractive"),oc:b("domComplete"),ls:b("loadEventStart"),le:b("loadEventEnd")},l-k>0&&(d.cs=k,d.ce=l),g-f>0&&(d.ds=f,d.de=g),(j-i>0||j>0)&&(d.es=i,d.ee=j),0==d.le&&(d.ue=r.load_time-h);var m;if(e.msFirstPaint)m=e.msFirstPaint;else if(a.chrome&&chrome.loadTimes){var n=chrome.loadTimes();n&&n.firstPaintTime&&(m=1e3*n.firstPaintTime)}else r.firstPaint&&(m=r.firstPaint);m&&(d.fp=Math.round(m-h)),e.secureConnectionStart&&(d.sl=b("secureConnectionStart"))}else d={t:h,os:r.end_time-h,ls:r.load_time-h};d.je=y.errors.length,y.ct&&(d.ct=y.ct-h),y.touch&&(d.fi=y.touch-h);var o=r.agent;return o&&(d.id=c(o.id),d.a=o.a,d.q=o.q,d.tid=c(o.tid),d.n=c(o.n)),d}function f(b){var c=a._ty_rum.c_ra;if(b)for(var d=c.length-1;d>=0;d--)if(b.indexOf(c[d].name)>-1)return c[d].xData;return null}function g(a){function b(a){return k[a]>0?k[a]:0}if(a<r.server.trace_threshold)return null;var d=x;if(d&&d.getEntriesByType){var e={tr:!0,tt:c(q.title),charset:q.characterSet},g=r.ra,i=d.getEntriesByType("resource");i&&(g=g.concat(i),d.webkitClearResourceTimings&&d.webkitClearResourceTimings(),d.clearResourceTimings&&d.clearResourceTimings()),e.res=[];for(var j=0;j<g.length;j++){var k=g[j],l={o:b("startTime"),rt:k.initiatorType,n:k.name,f:b("fetchStart"),ds:b("domainLookupStart"),de:b("domainLookupEnd"),cs:b("connectStart"),ce:b("connectEnd"),sl:b("secureConnectionStart"),qs:b("requestStart"),rs:b("responseStart"),re:b("responseEnd")},m=f(k.name);m&&(l.aid=m.id,l.atd=m.trId,l.an=m.action,l.aq=m.time&&m.time.qu,l.as=m.time&&m.time.duration),e.res.push(l)}if(y.errors.length){e.err=[];for(var j=0,n=y.errors;j<n.length;j++)e.err.push({o:Math.round(n[j][0]-h),e:n[j][1],l:n[j][2],c:n[j][3],r:n[j][4]})}return e}return null}if(this.sended)return!1;if(!this.ready())return!1;var h=r.st,i={};try{pf=d(),i=g(pf.ls>0?pf.ls:r.load_time-h)}catch(j){}i=i?w.stringify(i):"";var k=w.mkurl(r.server.beacon,"pf",pf);if(0!=i.length&&w.POST(k,i,{},e("POST"))||w.GET(k),this.errors.length>0){var j=y.errors[0];w.GET(w.mkurl(r.server.beacon_err,"err",{data:c(b([j[1],j[2],j[3],"#"==j[4]?q.URL:j[4],y.errors.length]))}),e("GET err"))}return this.sended=!0,this.sa(1),!0},sa:function(a){(this.ready()||a)&&(a||(a=!this._last_send||d()-this._last_send>r.snd_du()||r.aa.length>=r.cc()),r.aa.length>0&&a&&(this._last_send=d(),w.POST(w.mkurl(r.server.beacon,"xhr"),w.stringify({xhr:r.aa}),{},e("POST")),r.aa=[]))},errors:[]},z=null,A=[["load",h],["beforeunload",i],["pagehide",i],["unload",i],["error",k]],B=0;B<A.length;B++)w.sh(a,A[B][0],A[B][1],!1);for(var C=[["scroll",j],["keypress",j],["click",j],["DOMContentLoaded",f],["readystatechange",g]],B=0;B<C.length;B++)w.sh(q,C[B][0],C[B][1],!1);if(w.wrap(!1,a,"requestAnimationFrame",function(b){return function(){return r.firstPaint=d(),a.requestAnimationFrame=b,b.apply(this,arguments)}}),p)if(p.prototype)w.wrap(!1,p.prototype,"open",m),w.wrap(!1,p.prototype,"send",o);else{w.ie=7;var D=p;a.XMLHttpRequest=function(){var a=new D;return w.wrap(!1,a,"open",m),w.wrap(!1,a,"send",o),a}}else a.ActiveXObject&&(w.ie=6)}}(window);