!function(a){var b=a.document,c=a.location,d="all",e=!0,f="container",g="click",h=960,i=new RegExp("([^.]+)..*"),j=new RegExp("([^#]+)#([^#]+)"),k=new RegExp("([^.]+).([^.]+)"),l=443,m="https://click.jumei.com",n="map",o=a.document.domain.match(new RegExp(".[^.]+.com"));("undefined"==typeof o||null==o||""==o||0==o)&&(o=".jumei.com");var p=function(a,b,c){return new p.fn.init(a,b,c)};p.fn=p.prototype={domain_this:d,isOpen_this:e,container_this:f,width_this:h,event_this:g,dom:null,init:function(a,c,d){this.domain_this=this.isValid(a)?a:this.domain_this,this.isOpen_this="undefined"==typeof c?this.isOpen_this:c,this.container_this=this.isValid(d)?d:this.container_this;var e=b.domain;if(e=e.match(i),e=this.isValid(e)?e:["",""],"all"==this.domain_this){if(this.isOpen_this)if("string"==typeof this.container_this&&this.container_this.indexOf("#")>=0){var f=this.getDom(this.container_this,"id");f.length>0&&(this.dom=f[0])}else if("string"==typeof this.container_this&&this.container_this.indexOf(".")>=0){var f=this.getDom(this.container_this,"class");f.length>0&&(this.dom=f[0])}else this.dom=b.getElementById(this.container_this)}else if(this.domain_this==e[1]&&this.isOpen_this)if("string"==typeof this.container_this&&this.container_this.indexOf("#")>=0){var f=this.getDom(this.container_this,"id");f.length>0&&(this.dom=f[0])}else if("string"==typeof this.container_this&&this.container_this.indexOf(".")>=0){var f=this.getDom(this.container_this,"class");f.length>0&&(this.dom=f[0])}else this.dom=b.getElementById(this.container_this);return this},getDom:function(a,c){var d="";"id"==c?d=a.match(j):"class"==c&&(d=a.match(k));var e=null,f=[];if(d=this.isValid(d)?d:["","",""],this.isValid(d[1]&&this.isValid(d[2]))){e=b.getElementsByTagName(d[1]);for(var g=0;g<e.length;g++)e[g].getAttribute(c)==d[2]&&(f[f.length]=e[g])}return f},clkMap:function(){var a=new Object;return a.port=null,a.uri=null,a.path=null,a.cookie_uid=null,a.cust_id=null,a.refer=null,a.url=null,a.xy=null,a.type=null,a.time=null,a.site=null,a},event:function(d,e,f){if(this.dom){if(this.event_this=this.isValid(d)?d:this.event_this,"string"==typeof f&&f.indexOf("#")>=0){var g=this.getDom(f,"id");g.length>0&&(f=g[0].offsetWidth)}else if("string"==typeof f&&f.indexOf(".")>=0){var g=this.getDom(f,"class");g.length>0&&(f=g[0].offsetWidth)}else/^\d+$/.test(f)?f=f:(f=b.getElementById(f),f=this.isValid(f)?f.offsetWidth:this.width_this);/^\d+$/.test(f)&&(this.width_this=this.isValid(f)?f:this.width_this);var h=this;h.addEvent(h.dom,h.event_this,function(d){d=d||a.event;var f=b.documentElement.scrollLeft||b.body.scrollLeft,g=b.documentElement.scrollTop||b.body.scrollTop,i=b.documentElement.scrollWidth||b.body.scrollWidth,j=d.pageX||d.clientX+f,k=d.pageY||d.clientY+g,n=(i-h.width_this)/2,o=encodeURIComponent(decodeURIComponent(c.href)),p=parseInt(j-n)+"_"+parseInt(k),q=new h.clkMap;q.port=l,q.uri=m,q.path="hotmap.php";var r=h.getcookie_uid("cookie_uid",20);q.cookie_uid=r;var s=h.getUid();q.cust_id=h.isValid(s)?s:0;var t=encodeURIComponent(decodeURIComponent(b.referrer));q.refer=h.isValid(t)?t:o,q.url=o,q.xy=p,q.type=e,q.time=0,q.site=h.isValid(h.getCookie("default_site_25"))?h.getCookie("default_site_25"):"",o=h.getInvokeURL_path(q),i>=h.width_this&&parseInt(j-n)>=0&&parseInt(j-n)<=h.width_this&&$.ajax({url:o,dataType:"jsonp",success:function(){}})})}},click:function(a){if((c.href.match(new RegExp(i)).length>0||"all"==this.domain_this)&&this.isOpen_this){var d=new this.clkMap;d.port=l,d.uri=m,d.path=n;var e=this.getcookie_uid("cookie_uid",20);d.cookie_uid=e;var f=this.getUid();d.cust_id=this.isValid(f)?f:0;var g=encodeURIComponent(decodeURIComponent(b.referrer)),h=encodeURIComponent(decodeURIComponent(c.href));d.refer=this.isValid(g)?g:h,d.url=h,d.xy=0,d.type=a,d.time=this.getVisitTime(),d.site=this.isValid(this.getCookie("default_site_25"))?this.getCookie("default_site_25"):"",h=this.getInvokeURL(d),$.ajax({url:h,dataType:"jsonp",success:function(){}})}},mylist:function(){var a=new Object;return a.port=443,a.uri="https://click.jumei.com",a.path="mynav.php",a.cookie_uid=null,a.cust_id=null,a.type=null,a.site=null,a},listClick:function(){var a=c.href;if((a.match(new RegExp(i)).length>0||"all"==this.domain_this)&&this.isOpen_this){var b=new this.mylist;b.cookie_uid=this.getcookie_uid("cookie_uid",20),b.cust_id=this.isValid(this.getUid())?this.getUid():0;var d=a.match(new RegExp("i/(order|product|wishdeal|membership|credit|activity|account|RMA)/?([^?/]+)?"));d=this.isValid(d)&&3==d.length?this.isValid(d[2])?this.isValid(d[1])?d[1]+"_"+d[2]:"":this.isValid(d[1])?d[1]:"":"",b.type=this.isValid(d)?d:"",b.site=this.isValid(this.getCookie("default_site_25"))?this.getCookie("default_site_25"):"";var e=this.getInvokeURL_path(b);""!=d&&$.ajax({url:e,dataType:"jsonp",success:function(){}})}},account:function(){var a=new Object;return a.port=443,a.uri="https://click.jumei.com",a.path="ub.php",a.cookie_uid=null,a.cust_id=null,a.time=null,a.type=null,a.subtype=null,a.site=null,a},otherAccount:function(){var a=c.href;if((a.match(new RegExp(i)).length>0||"all"==this.domain_this)&&this.isOpen_this){var d=a.match(new RegExp("^https://"+b.domain+"/i/extconnect/([^/]+)/\\?site_name=([^&#]+).*"));if(null!=d){var e=new this.account;e.cookie_uid=this.getcookie_uid("cookie_uid",20),e.cust_id=this.isValid(this.getUid())?this.getUid():0,e.time=(new Date).getTime()-this.getCookie("search_start_time");var f=d[1];if(e.type="login"==f?1:"signup"==f?2:0,0!=e.type&&null!=d[2]&&""!=d[2]){e.subtype=d[2],e.site=this.isValid(this.getCookie("default_site_25"))?this.getCookie("default_site_25"):"";var g=this.getInvokeURL_path(e);$.ajax({url:g,dataType:"jsonp",success:function(){}})}}}},accountLogin:function(a,b){var d=c.href;if((d.match(new RegExp(i)).length>0||"all"==this.domain_this)&&this.isOpen_this){b=new RegExp("^1[3|4|5|7|8][0-9][0-9]{8}$").test(b)?"phone":new RegExp("^[A-Za-z0-9]+([-+.][A-Za-z0-9]+)*@[A-Za-z0-9]+([-.][A-Za-z0-9]+)*.[A-Za-z0-9]+([-.][A-Za-z0-9]+)*$").test(b)?"mail":"username";var e=new this.account;e.cookie_uid=this.getcookie_uid("cookie_uid",20),e.cust_id=this.isValid(this.getUid())?this.getUid():0,e.time=(new Date).getTime()-this.getCookie("search_start_time"),e.type=a,e.subtype=b,e.site=this.isValid(this.getCookie("default_site_25"))?this.getCookie("default_site_25"):"";var f=this.getInvokeURL_path(e);this.setHttpCookie("account_clk_url",f)}},accountSignup:function(a,b){var d=c.href;if((d.match(new RegExp(i)).length>0||"all"==this.domain_this)&&this.isOpen_this){var e=new this.account;e.cookie_uid=this.getcookie_uid("cookie_uid",20),e.cust_id=this.isValid(this.getUid())?this.getUid():0,e.time=(new Date).getTime()-this.getCookie("search_start_time"),e.type=a,e.subtype=b,e.site=this.isValid(this.getCookie("default_site_25"))?this.getCookie("default_site_25"):"";var f=this.getInvokeURL_path(e);this.setHttpCookie("account_clk_url",f)}},getVisitTime:function(){var a=this.getCookie("search_start_time");if(a){var b=(new Date).getTime()-a;return this.setHttpCookie("search_start_time",(new Date).getTime()),b>18e5?-1:b}return this.setHttpCookie("search_start_time",(new Date).getTime()),-1},obj2str:function(a){switch(typeof a){case"object":var b=[];if(a instanceof Array){for(var c=0,d=a.length;d>c;c++)b.push(this.obj2Str(a[c]));return"["+b.join(",")+"]"}if(a instanceof RegExp)return a.toString();for(var e in a)b.push('"'+e+'"'+":"+this.obj2Str(a[e]));return"{"+b.join(",")+"}";case"function":return"";case"number":return a.toString();case"string":return'"'+a.replace(/\n|\r|\t|\\|\"|\'/g," ")+'"';case"boolean":return a.toString();default:return a.toString()}},getInvokeURL:function(a){var b=a.uri+":"+a.port+"/"+a.path+"/"+"?"+"data={";delete a.uri,delete a.port,delete a.path;for(var c in a)b=b+'"'+c+'"'+":"+this.obj2str(a[c])+",";return b=b.replace(/,$/,"")+"}"},getInvokeURL_path:function(a){var b=a.uri+":"+a.port+"/"+a.path+"?"+"data={";delete a.uri,delete a.port,delete a.path;for(var c in a)b=b+'"'+c+'"'+":"+this.obj2str(a[c])+",";return b=b.replace(/,$/,"")+"}"},getUserStatus:function(){var b,c=new RegExp("(^| )search_user_status=([^;]*)(;|$)"),d=0;if((b=a.document.cookie.match(c))?d=decodeURIComponent(b[2]):this.setHttpCookie("search_user_status",0),c=new RegExp("(^| )uid=([^;]*)(;|$)"),b=a.document.cookie.match(c)){var e=decodeURIComponent(b[2]);null!=e&&0!=e&&0==d&&this.setHttpCookie("search_user_status",1)}},getcookie_uid:function(a,b){var c=this.getCookie(a);return this.isValid(c)||(c=this.rdStr(b),this.setHttpCookie("cookie_uid",c)),decodeURIComponent(this.getCookie(a))},getUid:function(){var a=this.getCookie("search_user_status"),b=this.getCookie("uid");return null==a||1!=a||null!=b&&0!=b&&""!=b?b:-1},setHttpCookie:function(a,c){var d=new Date,e=31536e7;d.setTime(d.getTime()+e),b.cookie=a+"="+encodeURIComponent(c)+";expires="+d.toGMTString()+";path=/;domain="+o},delHttpCookie:function(a){var c=new Date;c.setTime(c.getTime()-1e4),b.cookie=a+"="+";expires="+c.toGMTString()+";path=/;domain="+o},rdStr:function(a){for(var b="",c=0,d=0;a>d;d++)switch(c=Math.ceil(3*Math.random())){case 0:case 1:b+=String.fromCharCode(Math.ceil(25*Math.random())+97);break;case 2:b+=String.fromCharCode(Math.ceil(25*Math.random())+65);break;case 3:b+=Math.ceil(9*Math.random())}return b},getCookie:function(b){var c,d=new RegExp("(^| )"+b+"=([^;]*)(;|$)");return(c=a.document.cookie.match(d))?c[2]:""},isValid:function(a){return"undefined"==typeof a||null==a||""==a||0==a?!1:!0},addEvent:function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)}},p.fn.init.prototype=p.fn,a.clickMap=p;try{var q=p().getCookie("account_clk_url");null!=q&&""!=q&&(q=decodeURIComponent(q),$.ajax({url:q,dataType:"jsonp",success:function(){}}),setTimeout(function(){p().delHttpCookie("account_clk_url")},1e3)),new RegExp("^search..*$").test(a.document.domain)?p("search",!0,"container").event("mousedown",1,"1200"):new RegExp("^http://mall.[^.]+.com/(\\?from=.*)?$").test(a.location.href)||new RegExp("^http://mall.[^.]+.com/products/[0-9]+-[0-9]+-[0-9]+-[0-9]+-[0-9]+.html.*$").test(a.location.href)?p("mall",!0,"container").event("mousedown",1,"1200"):new RegExp("^http://mall.[^.]+.com/[^/]+/(\\?from=.*)?$").test(a.location.href)?p("mall",!0,"container").event("mousedown",1,"960"):new RegExp("^http://(bj|cd|sh|gz).[^.]+.com/(\\?from=.*)?$").test(a.location.href)?(p("bj",!0,"container").event("mousedown",1,"960"),p("cd",!0,"container").event("mousedown",1,"960"),p("sh",!0,"container").event("mousedown",1,"960"),p("gz",!0,"container").event("mousedown",1,"960")):(new RegExp("^http://pop.[^.]+.com/(dress_sport|shoe_bag|home_baby)(\\?from=.*)?$").test(a.location.href)||new RegExp("^http://pop.[^.]+.com/promotion/[0-9]+.html(\\?from=.*)?$").test(a.location.href)||new RegExp("^http://pop.[^.]+.com/(\\?from=.*)?$").test(a.location.href))&&p("pop",!0,"container").event("mousedown",1,"960"),p("all",!0).click(2),p("www",!0).listClick(),p("www",!0).otherAccount()}catch(r){}}(window);